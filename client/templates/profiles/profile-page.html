<template name="profilePage">
  <div class="page profile">
    {{> nav title='Profile'}}

      <div class="content-scrollable">
        <div class="page-profile {{#unless isReady}}loading{{/unless}}">
          {{#if isReady}}
          <section>
          <div class='user-profile'>
            {{#with data}}
              <div id='image'><img src='{{avatar}}' /></div>
              <div id='name'>{{name}}</div>

              <div id='points'>{{points}} POINTS - RANK: {{place}}</div>

              <div id='services'>
                {{#if hasFacebook}}
                  <div class='service'>
                    <a class='facebook' href='{{services.facebook.link}}'>Facebook: {{services.facebook.first_name}}</a>
                  </div>
                {{else}}
                  {{#if isCurrentUser}}
                    <div class='service'>
                      <button class="link link-facebook">Connect with Facebook</button>
                    </div>
                  {{/if}}
                {{/if}}

                {{#if hasTwitter}}
                  <div class='service'>
                    <a class='twitter' href='https://twitter.com/{{services.twitter.screenName}}'>Twitter: @{{services.twitter.screenName}}</a>
                  </div>
                {{else}}
                  {{#if isCurrentUser}}
                    <div class='service'>
                      <button class="link link-twitter">Connect with Twitter</button>
                    </div>
                  {{/if}}
                {{/if}}

                {{#if hasLinkedin}}
                  <div class='service'>
                    <a class='linkedin' href='https://www.linkedin.com/profile/view?id={{services.linkedin.id}}'>LinkedIn: {{name}}</a>
                  </div>
                {{else}}
                  {{#if isCurrentUser}}
                    <div class='service'>
                      <button class="link link-linkedin">Connect with LinkedIn.</button>
                    </div>
                  {{/if}}
                {{/if}}
              </div>

              <!-- If is current current user -->
              <div id='school' class="profile-info {{#if isCurrentUser}}editable{{/if}}" contenteditable={{isCurrentUser}}>{{school}}</div>
              <div id='year' class="profile-info {{#if isCurrentUser}}editable{{/if}}" contenteditable={{isCurrentUser}}>{{year}}</div>
              <div id='program' class="profile-info {{#if isCurrentUser}}editable{{/if}}" contenteditable={{isCurrentUser}}>{{program}}</div>
              <div id='about' class="profile-info {{#if isCurrentUser}}editable{{/if}}" contenteditable={{isCurrentUser}}>{{about}}</div>
            {{/with}}
          </div>
            {{#if isCurrentUser}}
              <button id="logout-button">Sign Out</button>
            {{/if}}
          </section>
        {{else}}
          <div class="wrapper-message">
            <div class="icon-sync"></div>
            <div class="title-message">Loading</div>
          </div>
        {{/if}}
      </div>
    </div>
  </div>
</template>
